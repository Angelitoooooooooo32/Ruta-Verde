<div class="login-container">
  <div class="login-wrapper">
    <!-- Promotional Side -->
    <div class="side-panel side-panel--promo">
      <div class="promo-background"></div>
      <div class="promo-content">
        <div class="promo-logo-circle">
          <img src="assets/eco-icon.png" alt="Ruta Verde Logo" class="promo-logo-img" />
        </div>
        
        <h2 class="promo-title">Bienvenido</h2>
        <p class="promo-subtitle">Inicia sesiÃ³n en tu cuenta para explorar nuestras rutas ecolÃ³gicas</p>
        <div class="promo-cta">
          <button class="cta-button" routerLink="/auth/register">Â¿No tienes cuenta? RegÃ­strate</button>
        </div>
      </div>
    </div>

    <!-- Form Side -->
    <div class="side-panel side-panel--form">
      <div class="login-card" [@fadeSlideInOut]>
        <div class="form-header">
          <div class="header-content">
            <div class="eco-avatar small">
              <img src="assets/eco-icon.png" alt="Ruta Verde" class="eco-avatar-img" />
            </div>
            <div class="header-text">
              <h1 class="form-brand">Ruta Verde</h1>
              <p class="form-tagline">Rutas ecolÃ³gicas y sostenibles</p>
            </div>
          </div>
        </div>

        <h2 class="form-title">Inicia sesiÃ³</h2>

        <section class="form-box">
          <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" autocomplete="on" class="login-custom-form">
            <div class="custom-field">
              <label>Email</label>
              <div class="input-wrap">
                <span class="input-icon">âœ‰ï¸</span>
                <input 
                  type="email" 
                  formControlName="email" 
                  autocomplete="email" 
                  placeholder="tu@email.com"
                  aria-label="Correo electrÃ³nico" 
                  title="Correo electrÃ³nico" 
                />
              </div>
              @if (loginForm.controls.email.errors?.['required'] && loginForm.controls.email.touched) {
                <div class="field-error">El email es requerido</div>
              }
              @if (loginForm.controls.email.errors?.['email'] && loginForm.controls.email.touched) {
                <div class="field-error">Ingresa un email vÃ¡lido</div>
              }
            </div>

            <div class="custom-field">
              <label>ContraseÃ±a</label>
              <div class="input-wrap">
                <span class="input-icon">ğŸ”’</span>
                <input 
                  [type]="showPassword() ? 'text' : 'password'" 
                  formControlName="password" 
                  autocomplete="current-password" 
                  placeholder="MÃ­nimo 6 caracteres"
                  aria-label="ContraseÃ±a" 
                  title="ContraseÃ±a" 
                />
                <button 
                  type="button" 
                  class="icon-btn toggle-password"
                  (click)="togglePassword()" 
                  [attr.aria-pressed]="showPassword()"
                  title="{{ showPassword() ? 'Ocultar contraseÃ±a' : 'Mostrar contraseÃ±a' }}"
                >
                  <span>{{ showPassword() ? 'ğŸ‘ï¸â€ğŸ—¨ï¸' : 'ğŸ‘ï¸' }}</span>
                </button>
              </div>
              @if (loginForm.controls.password.errors?.['required'] && loginForm.controls.password.touched) {
                <div class="field-error">La contraseÃ±a es requerida</div>
              }
              @if (loginForm.controls.password.errors?.['minlength'] && loginForm.controls.password.touched) {
                <div class="field-error">MÃ­nimo 6 caracteres</div>
              }
            </div>

            <div class="custom-row">
              <div class="custom-remember">
                <input type="checkbox" formControlName="remember" id="rememberCheck" />
                <label for="rememberCheck">RecuÃ©rdame</label>
              </div>
              <div class="custom-forgot">
                <a routerLink="/auth/forgot" class="forgot-link">Â¿Olvidaste tu contraseÃ±a?</a>
              </div>
            </div>

            <button type="submit" class="btn btn-submit" [disabled]="loading()">
              @if (loading()) {
                <span class="btn-spinner"></span>
                <span>Iniciando sesiÃ³n...</span>
              } @else {
                <span class="btn-icon">ğŸ”</span>
                <span>INICIA SESIÃ“N</span>
              }
            </button>
          </form>

          @if (error()) {
            <div class="error-box">
              <span class="error-icon">âš ï¸</span>
              <span class="error-text">{{ error() }}</span>
            </div>
          }
        </section>
      </div>
    </div>
  </div>
</div>

